# Sprint 3 æŠ€æœ¯å®ç°æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† Sprint 3 ä¸­ Streamlit Web App çš„æŠ€æœ¯ç»†èŠ‚å’Œå…³é”®è®¾è®¡å†³ç­–ã€‚

## æ ¸å¿ƒæŠ€æœ¯è¦æ±‚å®ç°

### 1. UI è®¾è®¡è“æœ¬å¤åˆ»

æˆ‘ä»¬ä¸¥æ ¼æŒ‰ç…§æ‚¨æä¾›çš„ `pasted_content_2.txt` æ–‡ä»¶ä¸­çš„è®¾è®¡è“æœ¬æ„å»ºäº† UIï¼ŒåŒ…æ‹¬ï¼š

- **é¡µé¢å¸ƒå±€**: ä½¿ç”¨ `st.set_page_config(layout="wide")` å®ç°å®½å±å¸ƒå±€ã€‚
- **è‡ªå®šä¹‰ CSS**: é€šè¿‡ `st.markdown(..., unsafe_allow_html=True)` æ³¨å…¥äº†æ‚¨æä¾›çš„å…¨éƒ¨ CSS ä»£ç ï¼Œå®ç°äº†åŒ…æ‹¬èƒŒæ™¯è‰²ã€æŒ‰é’®æ ·å¼ã€å¡ç‰‡å¼å¸ƒå±€åœ¨å†…çš„â€œVibeâ€é£æ ¼ã€‚
- **åŒæ ç»“æœå±•ç¤º**: ä½¿ç”¨ `st.columns([1, 2])` åˆ›å»ºäº†å·¦ä¾§ï¼ˆåŸå§‹æ•°æ®ï¼‰å’Œå³ä¾§ï¼ˆAI åˆ†æï¼‰çš„åŒæ å¸ƒå±€ã€‚
- **Tab é¡µé¢**: ä½¿ç”¨ `st.tabs()` å°† AI åˆ†æç»“æœæ¸…æ™°åœ°åˆ†ç¦»åˆ°â€œæ‰§è¡Œè„šæœ¬â€ã€â€œé€»è¾‘æ‹†è§£â€å’Œâ€œåŸå§‹æ•°æ®â€ä¸‰ä¸ªæ ‡ç­¾é¡µä¸­ã€‚

### 2. åç«¯é€»è¾‘é›†æˆ

`app.py` æˆåŠŸåœ°å°† Sprint 1 å’Œ Sprint 2 çš„åç«¯æ¨¡å— (`TikTokFetcher` å’Œ `VideoAnalyzer`) é›†æˆä¸ºä¸€ä¸ªå®Œæ•´çš„å·¥ä½œæµã€‚

**å®ç°æ–¹å¼**:

```python
if analyze_btn:
    # ... çœç•¥ API Key æ£€æŸ¥ ...
    try:
        # é˜¶æ®µ 1: è·å–è§†é¢‘æ•°æ®
        with st.spinner("ğŸ“¥ Step 1/3: Fetching video data..."):
            fetcher = TikTokFetcher(api_token=apify_token)
            video_data = fetcher.fetch_video_data(video_url)
        
        # é˜¶æ®µ 2: åˆ†æè§†é¢‘ç»“æ„
        with st.spinner("ğŸ¤– Step 2/3: Analyzing video with Gemini AI..."):
            analyzer = VideoAnalyzer(api_key=gemini_key)
            analysis_result = analyzer.analyze_video_structure(video_data["download_url"])
        
        # é˜¶æ®µ 3: ä¿å­˜å’Œå±•ç¤ºç»“æœ
        with st.spinner("ğŸ’¾ Step 3/3: Generating report..."):
            # ...
            st.session_state.current_result = full_report
            
    except Exception as e:
        st.error(f"âŒ åˆ†æå¤±è´¥: {str(e)}")
```

**å…³é”®ç‚¹**:
- **é¡ºåºæ‰§è¡Œ**: ç‚¹å‡»æŒ‰é’®åï¼ŒæŒ‰é¡ºåºè°ƒç”¨ `TikTokFetcher` å’Œ `VideoAnalyzer`ã€‚
- **å®æ—¶åé¦ˆ**: ä½¿ç”¨ `st.spinner()` ä¸ºæ¯ä¸ªé˜¶æ®µæä¾›æ¸…æ™°çš„åŠ è½½æç¤ºï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚
- **é”™è¯¯å¤„ç†**: ä½¿ç”¨ `try...except` æ•è·æ•´ä¸ªæµç¨‹ä¸­çš„ä»»ä½•å¼‚å¸¸ï¼Œå¹¶åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºå‹å¥½çš„é”™è¯¯ä¿¡æ¯ã€‚

### 3. çŠ¶æ€ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–

ä¸ºäº†åœ¨ç”¨æˆ·äº¤äº’ä¹‹é—´ä¿å­˜æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Streamlit çš„ Session State åŠŸèƒ½ã€‚

**å®ç°æ–¹å¼**:

```python
# åˆå§‹åŒ– Session State
if 'analysis_history' not in st.session_state:
    st.session_state.analysis_history = []

if 'current_result' not in st.session_state:
    st.session_state.current_result = None

# åœ¨åˆ†ææˆåŠŸåæ›´æ–° Session State
st.session_state.current_result = full_report
st.session_state.analysis_history.append(history_item)
```

**ä¼˜åŠ¿**:
- **é¿å…é‡å¤åˆ†æ**: åˆ†æç»“æœä¼šä¸€ç›´ä¿ç•™åœ¨é¡µé¢ä¸Šï¼Œç›´åˆ°ç”¨æˆ·ç‚¹å‡»â€œAnalyze Another Videoâ€æˆ–å…³é—­é¡µé¢ã€‚
- **å†å²è®°å½•**: åœ¨ä¾§è¾¹æ æ˜¾ç¤ºæœ€è¿‘çš„åˆ†æå†å²ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿½æº¯ã€‚

## UI å¸ƒå±€ä¸ç»„ä»¶

### ä¾§è¾¹æ  (`st.sidebar`)
- **API å¯†é’¥è¾“å…¥**: ä½¿ç”¨ `st.text_input(type="password")` å®‰å…¨åœ°è¾“å…¥å¯†é’¥ã€‚
- **å†å²è®°å½•**: åŠ¨æ€å±•ç¤º `st.session_state.analysis_history` ä¸­çš„å†…å®¹ã€‚

### ä¸»ç•Œé¢
- **è¾“å…¥åŒº**: `st.text_input` ç”¨äº URL è¾“å…¥ï¼Œ`st.button` ç”¨äºè§¦å‘åˆ†æã€‚
- **ç»“æœå±•ç¤ºåŒº (å·¦æ )**:
  - ä½¿ç”¨è‡ªå®šä¹‰çš„ `metric-card` å’Œ `engagement-metric` CSS ç±»æ¥å±•ç¤ºåŸå§‹è§†é¢‘æ•°æ®ã€‚
  - æ‰€æœ‰æ•°æ®å‡ä» `video_data` åŠ¨æ€å¡«å……ã€‚
- **ç»“æœå±•ç¤ºåŒº (å³æ )**:
  - **æŒ‡æ ‡å¡**: é¡¶éƒ¨çš„ä¸‰ä¸ªå…³é”®æŒ‡æ ‡ï¼ˆæƒ…æ„Ÿã€Hook ç±»å‹ã€ç¿»æ‹éš¾åº¦ï¼‰è®©ç”¨æˆ·ä¸€ç›®äº†ç„¶ã€‚
  - **Tab 1 (ç¿»æ‹è„šæœ¬)**: ä½¿ç”¨è‡ªå®šä¹‰çš„ `script-box` CSS ç±»æ¥å±•ç¤ºæ ¼å¼åŒ–çš„ç¿»æ‹è„šæœ¬ï¼Œå¹¶ç”¨ `st.info` å±•ç¤ºæœ¬åœ°åŒ–å»ºè®®ã€‚
  - **Tab 2 (é€»è¾‘æ‹†è§£)**: ä»¥é—®ç­”å½¢å¼æ¸…æ™°åœ°å±•ç¤ºäº†è§†é¢‘çš„ç»“æ„å’ŒæˆåŠŸåŸå› ã€‚
  - **Tab 3 (åŸå§‹æ•°æ®)**: ä½¿ç”¨ `st.json()` å±•ç¤ºå®Œæ•´çš„ JSON æŠ¥å‘Šï¼Œæ–¹ä¾¿å¼€å‘è€…è°ƒè¯•ã€‚

### æŠ¥å‘Šå¯¼å‡º

- **`st.download_button`**: æä¾›äº†ä¸¤ç§å¯¼å‡ºé€‰é¡¹ï¼š
  1. **ä¸‹è½½ JSON**: å°†å®Œæ•´çš„åˆ†ææŠ¥å‘Šï¼ˆåŒ…å«åŸå§‹æ•°æ®å’Œ AI åˆ†æï¼‰ä¿å­˜ä¸º `.json` æ–‡ä»¶ã€‚
  2. **ä¸‹è½½ Markdown è„šæœ¬**: å°†å…³é”®ä¿¡æ¯å’Œç¿»æ‹è„šæœ¬æ ¼å¼åŒ–ä¸ºæ˜“äºé˜…è¯»çš„ `.md` æ–‡ä»¶ã€‚

## å¦‚ä½•è¿è¡Œåº”ç”¨

### 1. ç¡®ä¿ä¾èµ–å·²å®‰è£…

```bash
sudo pip3 install -r requirements.txt
```

### 2. å¯åŠ¨åº”ç”¨

```bash
cd /home/ubuntu/ecom-video-insider
streamlit run app.py
```

### 3. ä½¿ç”¨åº”ç”¨

1. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æä¾›çš„ URLã€‚
2. åœ¨ä¾§è¾¹æ å¡«å…¥æ‚¨çš„ Apify å’Œ Gemini API å¯†é’¥ã€‚
3. ç²˜è´´ TikTok è§†é¢‘é“¾æ¥å¹¶ç‚¹å‡»åˆ†æã€‚

## æ€»ç»“

Sprint 3 æˆåŠŸåœ°å°†ä¸€ä¸ªå¤æ‚çš„åç«¯æ•°æ®å¤„ç†æµç¨‹å°è£…æˆäº†ä¸€ä¸ªç›´è§‚ã€æ˜“ç”¨ä¸”ç¾è§‚çš„ Web åº”ç”¨ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œä¸¥æ ¼éµå¾ªäº†æ‚¨çš„è®¾è®¡è¦æ±‚ï¼Œå¹¶é›†æˆäº†å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆæœºåˆ¶ï¼Œè¾¾åˆ°äº† MVPï¼ˆæœ€å°å¯è¡Œäº§å“ï¼‰çš„äº¤ä»˜æ ‡å‡†ã€‚
